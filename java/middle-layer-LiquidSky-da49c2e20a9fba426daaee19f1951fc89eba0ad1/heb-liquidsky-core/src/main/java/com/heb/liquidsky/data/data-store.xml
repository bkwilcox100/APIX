<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<data-store>

	<!--  Defines a particular shopping list for a user -->
	<data-type name="shoppinglist" id-property="id" id-generator-prefix="sl" pub-sub-enabled="true" fcm-enabled="true">
		<table name="heb_shopping_list" type="primary" id-column="shopping_list_id">
			<column column-name="shopping_list_id" property="id" />
			<column column-name="owner_id" property="ownerId" />
			<column column-name="site_id" property="siteId" />
			<column column-name="list_name" property="listName" />
		</table>
		
		<!-- cross reference table defines the link to all product item types attached to this list -->
		<table name="heb_shopping_list_product" type="reference" id-column="shopping_list_id">
			<column column-name="PRODUCT_ITEM_ID" list-item-type="productItem" property="productItems" read-only="true" cascade="true" />
		</table>
		
		<table name="heb_shopping_list_coupon" type="reference" id-column="shopping_list_id">
			<column column-name="COUPON_ITEM_ID" list-item-type="couponItem" property="couponItems" read-only="true" cascade="true" />
		</table>
		
		<table name="heb_shopping_list_freeform" type="reference" id-column="shopping_list_id">
			<column column-name="FREEFORM_ITEM_ID" list-item-type="freeformItem" property="freeformItems" read-only="true" cascade="true" />
		</table>
		
		<table name="heb_shopping_list_recipe" type="reference" id-column="shopping_list_id">
			<column column-name="RECIPE_ITEM_ID" list-item-type="recipeItem" property="recipeItems" read-only="true" cascade="true" />
		</table>
		
		<!-- Custom Properties -->
		<!--  listItemCount is a calculated value that is the sum of product items and freeform items -->
		<custom-property name="listItemCount" property-type="java.lang.String" source="com.heb.liquidsky.data.custom.ShoppingListItemCount">
			<attribute name="defaultValue" value="0" />
		</custom-property>
		
		<!-- Named Queries -->
		<named-query name="shopping_list_by_owner">
			select shopping_list_id from heb_shopping_list where owner_id = ?
		</named-query>
	</data-type>

	<!--  Defines list items that are attached to a list. -->
	<data-type name="productItem" id-property="id" id-generator-prefix="slp" pub-sub-enabled="false" fcm-enabled="false">
		<table name="heb_shopping_list_product" type="primary" id-column="PRODUCT_ITEM_ID">
			<column column-name="PRODUCT_ITEM_ID" property="id" />
			<column column-name="shopping_list_id" item-type="shoppinglist" property="parentShoppingList" />
			<column column-name="PRODUCT_ID" property="productId" />
			<column column-name="NOTES" property="notes" />
			<column column-name="QUANTITY" property="quantity" />
			<column column-name="STATUS" property="status" />
		</table>

		<!-- Custom Properties -->
		<custom-property name="name" property-type="java.lang.String" source="com.heb.liquidsky.data.custom.ShoppingListProductItemName">
			<attribute name="defaultValue" value="NOT FOUND" />
		</custom-property>
		
		<custom-property name="imageId" property-type="java.lang.String" source="com.heb.liquidsky.data.custom.ShoppingListProductItemImageId">
			<attribute name="defaultValue" value="NOT FOUND" />
		</custom-property>
		
	</data-type>
	
	<data-type name="couponItem" id-property="id" id-generator-prefix="slc" pub-sub-enabled="false" fcm-enabled="false">
		<table name="heb_shopping_list_coupon" type="primary" id-column="COUPON_ITEM_ID">
			<column column-name="COUPON_ITEM_ID" property="id" />
			<column column-name="shopping_list_id" item-type="shoppinglist" property="parentShoppingList" />
			<column column-name="COUPON_ID" property="couponId" />
			<column column-name="NOTES" property="notes" />
			<column column-name="STATUS" property="status" />
		</table>
	</data-type>

	<data-type name="freeformItem" id-property="id" id-generator-prefix="slf" pub-sub-enabled="false" fcm-enabled="false">
		<table name="heb_shopping_list_freeform" type="primary" id-column="FREEFORM_ITEM_ID">
			<column column-name="FREEFORM_ITEM_ID" property="id" />
			<column column-name="shopping_list_id" item-type="shoppinglist" property="parentShoppingList" />
			<column column-name="FREEFORM_NAME" property="freeformName" />
			<column column-name="NOTES" property="notes" />
			<column column-name="QUANTITY" property="quantity" />
			<column column-name="STATUS" property="status" />
		</table>
	</data-type>

	<data-type name="recipeItem" id-property="id" id-generator-prefix="slr" pub-sub-enabled="false" fcm-enabled="false">
		<table name="heb_shopping_list_recipe" type="primary" id-column="RECIPE_ITEM_ID">
			<column column-name="RECIPE_ITEM_ID" property="id" />
			<column column-name="shopping_list_id" item-type="shoppinglist" property="parentShoppingList" />
			<column column-name="RECIPE_ID" property="recipeId" />
			<column column-name="NOTES" property="notes" />
			<column column-name="STATUS" property="status" />
		</table>
		
		<!-- Custom Properties -->
		<custom-property name="name" property-type="java.lang.String" source="com.heb.liquidsky.data.custom.ShoppingListRecipeItemName">
			<attribute name="defaultValue" value="NOT FOUND" />
		</custom-property>
		
		<custom-property name="imageId" property-type="java.lang.String" source="com.heb.liquidsky.data.custom.ShoppingListRecipeItemImageId">
			<attribute name="defaultValue" value="NOT FOUND" />
		</custom-property>
	</data-type>

	<!-- External ATG data for dynamic list item details -->
	<data-type name="atgProduct" id-property="id" pub-sub-enabled="false" fcm-enabled="false">
		<table name="atg_product" type="primary" id-column="product_id">
			<column column-name="product_id" property="id" />
			<column column-name="display_name" property="displayName" />
			<column column-name="start_date" property="startDate" />
			<column column-name="end_date" property="endDate" />
			<column column-name="description" property="description" />
			<column column-name="default_sku" property="defaultSku" />
			<column column-name="parent_product_id" property="parentProductId" />
			<column column-name="parent_product_upc" property="parentProductUpc" />
			<column column-name="pos_product_id" property="posProductId" />
			<column column-name="scene_seven_image" property="sceneSevenImage" />
			<column column-name="twelve_upc" property="twelveUpc" />
		</table>
	</data-type>
	
	<data-type name="atgAssortment" id-property="id" pub-sub-enabled="false" fcm-enabled="false">
		<table name="atg_assortment" type="primary" id-column="store_assort_id">
			<column column-name="store_assort_id" property="id" />
			<column column-name="product_id" property="productId" />
			<column column-name="store_id" property="store_id" />
			<column column-name="location" property="location" />
			<column column-name="marketing_bug_id" property="marketing_bug_id" />
			<column column-name="marketing_bug_st_dt" property="marketing_bug_st_dt" />
			<column column-name="marketing_bug_end_dt" property="marketing_bug_end_dt" />
		</table>
	</data-type>
	
	<data-type name="atgStore" id-property="id" pub-sub-enabled="false" fcm-enabled="false">
		<table name="atg_store" type="primary" id-column="store_id">
			<column column-name="store_id" property="id" />
			<column column-name="store_number" property="store_number" />
			<column column-name="store_type" property="store_type" />
		</table>
	</data-type>
	
	<data-type name="atgRecipe" id-property="id" pub-sub-enabled="false" fcm-enabled="false">
		<table name="atg_recipe" type="primary" id-column="recipe_id">
			<column column-name="recipe_id" property="id" />
			<column column-name="name" property="name" />
			<column column-name="clean_name" property="cleanName" />
			<column column-name="marketing_bug_id" property="marketingBugId" />
			<column column-name="external_recipe_id" property="externalRecipeId" />
			<column column-name="preparation_time" property="preparationTime" />
			<column column-name="cook_time" property="cookTime" />
			<column column-name="total_time" property="totalTime" />
			<column column-name="no_of_servings" property="noOfServings" />
		</table>
	</data-type>
</data-store>
